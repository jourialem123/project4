;/*FB_PKG_DELIM*/

__d("CometSaveMutationHelper",["CometRelay"],(function(a,b,c,d,e,f,g){"use strict";var h="CometSaveCollectionAllItems_collection_items",i="CometSaveGroupCollectionAllItems_items",j=[{key:"CometSaveLeftRailCollections_saver_content_collections",use_case:"SAVE_DEFAULT"},{key:"CometSaveSelectCollectionList_saver_content_collections",use_case:"SAVE_BOTTOM_SHEET"},{key:"SaveSelectCollection_saver_content_collections",use_case:"SAVE_BOTTOM_SHEET"}];function a(a,b,c){b=a.get(b);if(!b)return;var e=d("CometRelay").ConnectionHandler.getConnection(b,h);if(!e)return;c.forEach(function(b){if(b){b=d("CometRelay").ConnectionHandler.createEdge(a,e,b,"SaverInfoSaverContentCollectionsEdge");d("CometRelay").ConnectionHandler.insertEdgeBefore(e,b)}})}function b(a,b,c){b=a.get(b);if(!b)return;b=d("CometRelay").ConnectionHandler.getConnection(b,i);if(!b)return;a=d("CometRelay").ConnectionHandler.createEdge(a,b,c,"ContentCollectionItemsEdge");d("CometRelay").ConnectionHandler.insertEdgeBefore(b,a)}function c(a,b){a=(a=a.getLinkedRecords("edges"))!=null?a:[];for(var c=0;c<a.length;c++){var d=a[c];d=d&&d.getLinkedRecord("node");var e=d&&d.getLinkedRecord("savable");e=e&&e.getDataID();d=d&&d.getDataID();if(b===e)return d}}function e(a,b,c){j.forEach(function(e){var f=e.key;e=e.use_case;f=d("CometRelay").ConnectionHandler.getConnection(c,f,{use_case:e});if(f==null)return;d("CometRelay").ConnectionHandler.insertEdgeBefore(f,d("CometRelay").ConnectionHandler.createEdge(a,f,b,"SaverInfoSaverContentCollectionsEdge"))})}function f(a,b){j.forEach(function(c){c=c.key;c=d("CometRelay").ConnectionHandler.getConnection(a,c);if(c==null)return;d("CometRelay").ConnectionHandler.deleteNode(c,b)})}g.addToCollection=a;g.addToGroupCollection=b;g.findNodeIDForSavable=c;g.addCollectionToConnections=e;g.removeCollectionFromConnections=f}),98);
__d("CometSaveToggle_savable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometSaveToggle_savable",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_saved_state",storageKey:null}],type:"Savable",abstractKey:"__isSavable"};e.exports=a}),null);
__d("useContentCollectionAddSavablesMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6873107549445194"}),null);
__d("useContentCollectionAddSavablesMutation.graphql",["useContentCollectionAddSavablesMutation_facebookRelayOperation","SaveCollectionsFeatureParityComet.relayprovider"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"contributorRoles"},c={defaultValue:null,kind:"LocalArgument",name:"input"},d={defaultValue:null,kind:"LocalArgument",name:"scale"},e=[{kind:"Variable",name:"data",variableName:"input"}],f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"collection_title",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"useContentCollectionAddSavablesMutation",selections:[{alias:null,args:e,concreteType:"ContentCollectionAddSavablesResponsePayload",kind:"LinkedField",name:"content_collection_add_savables",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"added_content_collection_items",plural:!0,selections:[f],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content_collection",plural:!1,selections:[f,g,{args:null,kind:"FragmentSpread",name:"CometSaveLeftRailListItem_collection"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"SaverInfo",kind:"LinkedField",name:"saver_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"SaveGeminiHeaderTabs_saverInfo"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,d,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__SaveCollectionsFeatureParityCometrelayprovider"}],kind:"Operation",name:"useContentCollectionAddSavablesMutation",selections:[{alias:null,args:e,concreteType:"ContentCollectionAddSavablesResponsePayload",kind:"LinkedField",name:"content_collection_add_savables",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"added_content_collection_items",plural:!0,selections:[h,f],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content_collection",plural:!1,selections:[h,f,g,{kind:"TypeDiscriminator",abstractKey:"__isContentCollection"},{alias:null,args:[{kind:"Literal",name:"height",value:48},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:48}],concreteType:"Image",kind:"LinkedField",name:"collection_thumbnail_image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{condition:"__relay_internal__pv__SaveCollectionsFeatureParityCometrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[{kind:"Variable",name:"roles",variableName:"contributorRoles"}],kind:"ScalarField",name:"participant_count",storageKey:null},{alias:null,args:null,concreteType:"PrivacyScope",kind:"LinkedField",name:"privacy_scope",plural:!1,selections:[{alias:null,args:null,concreteType:"PrivacyOption",kind:"LinkedField",name:"selected_option",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"icon_image",plural:!1,selections:[i],storageKey:null},f],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collection_followers_count",storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"SaverInfo",kind:"LinkedField",name:"saver_info",plural:!1,selections:[{alias:null,args:null,concreteType:"SaverInfoToSaveListsConnection",kind:"LinkedField",name:"save_lists",plural:!1,selections:[{alias:null,args:null,concreteType:"SaveList",kind:"LinkedField",name:"nodes",plural:!0,selections:[i,f],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("useContentCollectionAddSavablesMutation_facebookRelayOperation"),metadata:{},name:"useContentCollectionAddSavablesMutation",operationKind:"mutation",text:null,providedVariables:{__relay_internal__pv__SaveCollectionsFeatureParityCometrelayprovider:b("SaveCollectionsFeatureParityComet.relayprovider")}}}}();e.exports=a}),null);
__d("useContentCollectionAddSavablesMutation",["CometRelay","CometSaveCollectionConstants","CometSaveMutationHelper","CometSaveStoryMutationHelper","FBLogger","WebPixelRatio","useCometSaveLoggingContext","useContentCollectionAddSavablesMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=c("FBLogger")("saved_for_later"),e=c("useCometSaveLoggingContext")().surfaceGraphQL,f=d("CometRelay").useMutation(h!==void 0?h:h=b("useContentCollectionAddSavablesMutation.graphql")),g=f[0];return function(b,c){var f=b.collectionID,h=b.collectionTitle,i=b.mechanism,j=b.savableIDs;b=b.surface;if(j==null)throw a.mustfixThrow("savableIDs not provided to add savables mutation");c.optimisticUpdater;c.updater;c=babelHelpers.objectWithoutPropertiesLoose(c,["optimisticUpdater","updater"]);var k=function(a){d("CometSaveStoryMutationHelper").updateSavablesSaveState(a,j,"SAVED");var b=a.getRootField("content_collection_add_savables");if(b==null)return;b=b.getLinkedRecord("content_collection");if(b==null)return;if(f!==b.getValue("id")){var c=a.get(d("CometRelay").VIEWER_ID);if(c==null)return;c=c.getLinkedRecord("saver_info");if(c==null)return;d("CometSaveMutationHelper").addCollectionToConnections(a,b,c)}},l=k;k=k;b=(b=b)!=null?b:e;return g(babelHelpers["extends"]({},c,{optimisticUpdater:l,updater:k,variables:{contributorRoles:d("CometSaveCollectionConstants").COLLECTION_FACEPILE_CONTRIBUTORS_ROLES,input:{collection_title:h,content_collection_id:f,savable_ids:j,save_mechanism:i,save_surface:b},scale:d("WebPixelRatio").get()}}))}}g["default"]=a}),98);
__d("CometSaveToggle.react",["fbt","CometRelay","CometSaveToastUtil","CometSaveToggle_savable.graphql","react","requireDeferred","useAddToCollectionFlow","useContentCollectionAddSavablesMutation","useSaveMutation","useUnsaveMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;j||(j=d("react"));var k=j.useCallback,l=c("requireDeferred")("cometPushToast").__setRef("CometSaveToggle.react"),m=i!==void 0?i:i=b("CometSaveToggle_savable.graphql");function a(a){var b=a.SaveComponent,e=a.UnsaveComponent,f=a.mechanism,g=a.onSaveSuccess,i=a.onUnsave,j=a.onUnsaveSuccess,n=a.overrideSaveDestinationLink,o=a.savable,p=a.saveToCollectionID,q=a.surface;a=d("CometRelay").useFragment(m,o);var r=a.id;o=c("useAddToCollectionFlow")(p);var s=o[0],t=c("useSaveMutation")({mechanism:f,savableID:r,surface:q}),u=k(function(a,b,c){d("CometSaveToastUtil").showSaveToast(b,a,c)},[]),v=c("useContentCollectionAddSavablesMutation")(),w=c("useUnsaveMutation")(),x=k(function(a){if(a===!0)return;l.onReady(function(a){a.cometPushSimpleToast(h._("__JHASH__IY_ec9IT6vx__JHASH__"))})},[]);if(r==null)return null;switch(a.viewer_saved_state){case"SAVED":return e(function(){var a;i?i():w({mechanism:f,savableID:r,surface:q},{onCompleted:(a=j)!=null?a:d("CometSaveToastUtil").showUnsaveToast})});case"NOT_SAVED":return b(function(){if(p!=null){var a,b=function(a){a=(a=a.content_collection_add_savables)==null?void 0:a.content_collection;u(a==null?void 0:a.id,a==null?void 0:a.collection_title)};v({collectionID:p,mechanism:f,overrideSaveDestinationLink:n,savableIDs:[r]},{onCompleted:(a=g)!=null?a:b})}else t(),s({mechanism:f,onClose:x,savableID:r},x)});case"NOT_SAVABLE":default:return null}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);